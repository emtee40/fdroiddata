AntiFeatures:
  NonFreeNet:
    en-US: Rely on MusicBrainz
Categories:
  - Multimedia
License: Apache-2.0
AuthorName: David Ly
AuthorEmail: dvdly.apps@gmail.com
WebSite: https://lydavid.github.io/MusicSearch
SourceCode: https://github.com/lydavid/MusicSearch
IssueTracker: https://github.com/lydavid/MusicSearch/issues
Changelog: https://github.com/lydavid/MusicSearch/releases

AutoName: MusicSearch

RepoType: git
Repo: https://github.com/lydavid/MusicSearch.git
Binaries: https://github.com/lydavid/MusicSearch/releases/download/v%v/app-fDroid-release.apk

Builds:
  - versionName: 1.6.0-beta.8
    versionCode: 471
    commit: v1.6.0-beta.8
    subdir: android/app
    sudo:
      - echo "deb http://deb.debian.org/debian trixie main" > /etc/apt/sources.list.d/trixie.list
      - apt-get update
      - apt-get install -y openjdk-21-jdk-headless
      - update-java-alternatives -a
    gradle:
      - fDroid
    prebuild:
      - cp -R ../../gradle ./
      - echo "TVVTSUNCUkFJTlpfQ0xJRU5UX0lEPWtpbVpiWXlaYUVia2Ewb0Npb1ExNUdINWhlNFp4dGtXCg=="
        | base64 -d > ../../not_so_secret.properties
      - echo "TVVTSUNCUkFJTlpfQ0xJRU5UX1NFQ1JFVD00ZVlINmpqRzBVVm1GRGN1Yk1CSThrVVlxT18xVkxHRAo="
        | base64 -d >> ../../not_so_secret.properties
      - sed -i -e '/firebase/d' -e '/google.services/d' ../../build.gradle.kts
    scandelete:
      - build-logic/convention/build

  - versionName: 1.6.0
    versionCode: 472
    commit: 728aea157b01492e7a9baa812e982cd3f9dc0bfc
    subdir: android/app
    sudo:
      - echo "deb http://deb.debian.org/debian trixie main" > /etc/apt/sources.list.d/trixie.list
      - apt-get update
      - apt-get install -y openjdk-21-jdk-headless
      - update-java-alternatives -a
    gradle:
      - fDroid
    prebuild:
      - cp -R ../../gradle ./
      - echo "TVVTSUNCUkFJTlpfQ0xJRU5UX0lEPWtpbVpiWXlaYUVia2Ewb0Npb1ExNUdINWhlNFp4dGtXCg=="
        | base64 -d > ../../not_so_secret.properties
      - echo "TVVTSUNCUkFJTlpfQ0xJRU5UX1NFQ1JFVD00ZVlINmpqRzBVVm1GRGN1Yk1CSThrVVlxT18xVkxHRAo="
        | base64 -d >> ../../not_so_secret.properties
      - sed -i -e '/firebase/d' -e '/google.services/d' ../../build.gradle.kts
    scandelete:
      - build-logic/convention/build

AllowedAPKSigningKeys: c9b37762445dfcab7eabea79195d7f5c32501180f7c31403cf5cb427fd6810fc

AutoUpdateMode: Version
UpdateCheckMode: Tags
UpdateCheckData: gradle.properties|VERSION_CODE=(\d+)|.|VERSION_NAME=([\d.]+)
CurrentVersion: 1.6.0
CurrentVersionCode: 472
