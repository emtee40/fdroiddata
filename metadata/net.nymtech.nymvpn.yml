AntiFeatures:
  NonFreeNet:
    en-US: Depends on the Nym network.
Categories:
  - Connectivity
  - Internet
  - Security
  - System

WebSite: https://nym.com
License: GPL-3.0
SourceCode: https://github.com/nymtech/nym-vpn-client
IssueTracker: https://github.com/nymtech/nym-vpn-client/issues
Changelog: https://github.com/nymtech/nym-vpn-client/releases
Translation: https://weblate.nymte.ch/projects/nymvpn

AutoName: NymVPN

RepoType: git
Repo: https://github.com/nymtech/nym-vpn-client.git

Builds:
  - versionName: v1.1.2
    versionCode: 11200
    commit: f23cc12d75551c403474325d9226124e52b8cb9b
    subdir: nym-vpn-android
    sudo:
      - apt-get update && sudo apt-get install -y libdbus-1-dev libmnl-dev libnftnl-dev protobuf-compiler git curl gcc g++ make unzip
    init: bash scripts/fdroid-prebuild.sh
    ndk: r25c
    gradle:
      - fdroid
    scanignore:
      - nym-vpn-android/nym-vpn-client/src/main/jniLibs/
    rm:
      - nym-vpn-apple
      - nym-vpn-app
      - proto
    prebuild:
      - echo "Building WireGuard dep"
      - export GOPATH="$HOME/go"
      - export PATH="$PATH:$GOPATH"
      - source "$HOME/.cargo/env"
      - export NDK_TOOLCHAIN_DIR="$$NDK$$/toolchains/llvm/prebuilt/$(basename $$NDK$$/toolchains/llvm/prebuilt/*/)/bin"
      - bash ../wireguard/build-wireguard-go.sh
      - bash ../wireguard/libwg/build-android.sh
      - export RUSTFLAGS="-L ../build/lib/aarch64-linux-android -L ../build/lib/x86_64-unknown-linux-gnu"
      - (cd ../nym-vpn-core/crates/nym-vpn-lib; cargo ndk -t arm64-v8a -o ../../../nym-vpn-android/nym-vpn-client/src/main/jniLibs build --release)
      - (cd ../nym-vpn-core; cargo run --bin uniffi-bindgen generate --library ./target/aarch64-linux-android/release/libnym_vpn_lib.so  --language kotlin --out-dir ../nym-vpn-android/nym-vpn-client/src/main/java/net/nymtech/vpn -n)
      - cargo license -j --avoid-dev-deps --current-dir ../nym-vpn-core/crates/nym-vpn-lib --filter-platform aarch64-linux-android --avoid-build-deps > ./nym-vpn-client/src/main/assets/licenses_rust.json
      - mv /nym-vpn-client/src/main/jniLibs/arm64-v8a/libnym_vpn_lib.so /nym-vpn-client/src/main/jniLibs/arm64-v8a/libnym_vpn_lib.so
      - mv ../android/app/build/extraJni/arm64-v8a/libwg.so /nym-vpn-client/src/main/jniLibs/arm64-v8a/


AutoUpdateMode: Version
UpdateCheckMode: Tags nym-vpn-android-v\d+\.\d+\.\d+$
CurrentVersion: nym-vpn-android-v1.1.2
CurrentVersionCode: 11200