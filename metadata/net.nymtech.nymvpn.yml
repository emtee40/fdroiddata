AntiFeatures:
  NonFreeNet:
    en-US: Depends on the Nym network.
Categories:
  - Connectivity
  - Internet
  - Security
  - System
License: GPL-3.0-only
WebSite: https://nym.com
SourceCode: https://github.com/nymtech/nym-vpn-client
IssueTracker: https://github.com/nymtech/nym-vpn-client/issues
Translation: https://weblate.nymte.ch/projects/nymvpn
Changelog: https://github.com/nymtech/nym-vpn-client/releases

AutoName: NymVPN

RepoType: git
Repo: https://github.com/nymtech/nym-vpn-client.git

Builds:
  - versionName: v1.1.2
    versionCode: 11200
    commit: c7dd0408806d14d8eebba1ed4804a64ae5fa7315
    subdir: nym-vpn-android
    sudo:
      - apt-get update
      - apt-get install -y libdbus-1-dev
      - apt-get install -y libmnl-dev libnftnl-dev protobuf-compiler make
    init: bash scripts/fdroid-init.sh
    gradle:
      - fdroid
    output: app/build/outputs/apk/fdroid/release/nymvpn-fdroid-release-*.apk
    rm:
      - nym-vpn-apple
      - nym-vpn-app
      - proto
    prebuild:
      - echo "Building WireGuard dep"
      - source "$HOME/.cargo/env"
      - export PATH="$PATH:$HOME/go/bin"
      - export NDK_TOOLCHAIN_DIR="$$NDK$$/toolchains/llvm/prebuilt/$(basename $$NDK$$/toolchains/llvm/prebuilt/*/)/bin"
      - bash ../wireguard/build-wireguard-go.sh
      - bash ../wireguard/libwg/build-android.sh
      - (cd ../nym-vpn-core/crates/nym-vpn-lib; cargo ndk -t arm64-v8a -o ../../../nym-vpn-android/nym-vpn-client/src/main/jniLibs
        build --release)
      - (cd ../nym-vpn-core; cargo run --bin uniffi-bindgen generate --library ./target/aarch64-linux-android/release/libnym_vpn_lib.so  --language
        kotlin --out-dir ../nym-vpn-android/nym-vpn-client/src/main/java/net/nymtech/vpn
        -n)
      - cargo license -j --avoid-dev-deps --current-dir ../nym-vpn-core/crates/nym-vpn-lib
        --filter-platform aarch64-linux-android --avoid-build-deps > ./nym-vpn-client/src/main/assets/licenses_rust.json
    scanignore:
      - nym-vpn-android/nym-vpn-client/src/main/jniLibs/
      - android/app/build/extraJni
      - nym-vpn-core/target
      - build/android-go-path
      - build/lib
    ndk: r25c

AutoUpdateMode: Version
UpdateCheckMode: Tags nym-vpn-android-v\d+\.\d+\.\d+$
UpdateCheckData: nym-vpn-android/buildSrc/src/main/kotlin/Constants.kt|VERSION_CODE = (\d+)|.|VERSION_NA
 ME
  = "(.+)"
CurrentVersion: nym-vpn-android-v1.1.2
CurrentVersionCode: 11200
